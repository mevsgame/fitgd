<form class="equipment-edit-form">
  <div class="form-group">
    <label>Name</label>
    <input type="text" name="name" value="{{equipment.name}}" required />
  </div>

  <div class="form-group">
    <label>Tier</label>
    <select name="tier">
      {{#each tiers}}
      <option value="{{this}}" {{#if (eq this ../equipment.tier)}}selected{{/if}}>{{this}}</option>
      {{/each}}
    </select>
  </div>

  <div class="form-group">
    <label>Category</label>
    <select name="category">
      {{#each categories}}
      <option value="{{this}}" {{#if (eq this ../equipment.category)}}selected{{/if}}>{{this}}</option>
      {{/each}}
    </select>
  </div>

  <div class="form-group">
    <label>Description</label>
    <textarea name="description" rows="4">{{equipment.description}}</textarea>
  </div>

  <div class="form-group">
    <label>Modifiers</label>
    <div class="modifiers-grid">
      <div class="modifier-field">
        <label>Position</label>
        <select name="modifiers.position">
          <option value="none" {{#if (eq equipment.modifiers.position "none" )}}selected{{/if}}>None</option>
          <option value="plus_one_step" {{#if (eq equipment.modifiers.position "plus_one_step" )}}selected{{/if}}>+1
            Step</option>
          <option value="minus_one_step" {{#if (eq equipment.modifiers.position "minus_one_step" )}}selected{{/if}}>-1
            Step</option>
        </select>
      </div>
      <div class="modifier-field">
        <label>Effect</label>
        <select name="modifiers.effect">
          <option value="none" {{#if (eq equipment.modifiers.effect "none" )}}selected{{/if}}>None</option>
          <option value="plus_one_level" {{#if (eq equipment.modifiers.effect "plus_one_level" )}}selected{{/if}}>+1
            Level</option>
          <option value="minus_one_level" {{#if (eq equipment.modifiers.effect "minus_one_level" )}}selected{{/if}}>-1
            Level</option>
        </select>
      </div>
      <div class="modifier-field">
        <label>Dice Pool</label>
        <input type="number" name="modifiers.dicePool" value="{{equipment.modifiers.dicePool}}" placeholder="0" />
      </div>
    </div>
  </div>

  <div class="form-group">
    <label>Image Path</label>
    <input type="text" name="img" value="{{equipment.img}}"
      placeholder="systems/forged-in-the-grimdark/assets/items/..." />
    <p class="help-text">Path to item image (or leave empty for default icon)</p>
  </div>

  {{#if equipment.sourceItemId}}
  <div class="form-group">
    <label>Source Template</label>
    <input type="text" value="{{equipment.sourceItemId}}" disabled />
    <p class="help-text">Original template ID (for reference only)</p>
  </div>
  {{/if}}

  {{#if equipment.acquiredAt}}
  <div class="form-group">
    <label>Acquired</label>
    <p class="equipment-meta">
      {{#if equipment.acquiredVia}}
      Via <strong>{{equipment.acquiredVia}}</strong>
      {{/if}}
      on <time datetime="{{equipment.acquiredAt}}">{{formatTimestamp equipment.acquiredAt}}</time>
    </p>
  </div>
  {{/if}}

  <div class="form-buttons">
    <button type="submit" class="save-btn">
      <i class="fas fa-save"></i> Save Changes
    </button>
    <button type="button" class="cancel-btn">
      <i class="fas fa-times"></i> Cancel
    </button>
  </div>
</form>