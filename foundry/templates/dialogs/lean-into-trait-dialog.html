<div class="lean-into-trait-dialog">
  <!-- Header -->
  <div class="dialog-header">
    <h2>{{localize "FITGD.Dialogs.LeanInto.Title"}}</h2>
    <p class="momentum-display">{{localize "FITGD.Dialogs.LeanInto.CurrentMomentum"}}: <strong>{{momentum}}/10</strong>
    </p>
    <p class="gain-notice">
      {{{localize "FITGD.Dialogs.LeanInto.GainNotice" gain=momentumGain}}}
      {{#if wouldCapOut}}{{{localize "FITGD.Dialogs.LeanInto.Capped"}}}{{/if}}
    </p>
  </div>

  <!-- Instructions -->
  <div class="instructions">
    <p><strong>{{localize "FITGD.Dialogs.LeanInto.Instruction"}}</strong></p>
    <p class="help-text">
      {{{localize "FITGD.Dialogs.LeanInto.HelpText"}}}
    </p>
  </div>

  <!-- Trait List -->
  <div class="trait-list">
    <h3>{{localize "FITGD.Dialogs.LeanInto.SelectTrait"}}</h3>

    <div class="traits-grid">
      {{#each availableTraits}}
      <div class="trait-item {{#if (eq ../selectedTraitId this.id)}}selected{{/if}}" data-trait-id="{{this.id}}">
        <div class="trait-name">{{this.name}}</div>
        <div class="trait-category">{{this.category}}</div>
        {{#if this.description}}
        <div class="trait-description">{{this.description}}</div>
        {{/if}}
      </div>
      {{/each}}

      {{#unless availableTraits.length}}
      <p class="no-traits">{{localize "FITGD.Dialogs.LeanInto.NoTraits"}}</p>
      {{/unless}}
    </div>
  </div>

  <!-- Optional Complication Description -->
  {{#if selectedTraitId}}
  <div class="complication-input">
    <label>{{localize "FITGD.Dialogs.LeanInto.DescribeComplication"}}</label>
    <textarea name="complicationDescription" rows="2"
      placeholder="{{localize 'FITGD.Dialogs.LeanInto.PlaceholderComplication'}}"></textarea>
    <p class="help-text-small">{{localize "FITGD.Dialogs.LeanInto.FlavorText"}}</p>
  </div>
  {{/if}}

  <!-- Action Buttons -->
  <div class="dialog-buttons">
    <button type="button" data-action="cancel" class="secondary">{{localize "FITGD.Global.Cancel"}}</button>
    <button type="button" data-action="apply" class="primary" {{#unless selectedTraitId}}disabled{{/unless}}>
      {{localize "FITGD.Dialogs.LeanInto.BtnLean" gain=momentumGain}}
    </button>
  </div>
</div>